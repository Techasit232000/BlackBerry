<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlackBerry Dynamics: DynamicsWatch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen_13.1.0.48.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra_13.1.0.48.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
	<div id="titleheadings">
	<ul> 
		<li id="projectlogo">
	 		<a id="corplink" href="https://blackberry.com/"><img alt="Logo" src="BlackBerryLogo.png"/></a></li>
	 	<li id="projectname">BlackBerry Dynamics</li>
	  	<li id="projectbrief">Runtime library for iOS applications</li>
	  	<li id="projectnumber">13.1.0.48</li>
	 </ul>
	</div>
	 <div id="titlelinks">
	 		<a href="https://developers.blackberry.com">BlackBerry Developers</a>
	 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('interface_dynamics_watch.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="interface_dynamics_watch-members.html">List of all members</a> &#124;
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="#pub-static-methods">Class Methods</a> &#124;
<a href="#pro-types">Protected Types</a>  </div>
  <div class="headertitle">
<div class="title">DynamicsWatch Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>BlackBerry Dynamics WatchOS interface to support secure messaging between WatchOS and iOS applications.  
 <a href="interface_dynamics_watch.html#details">More...</a></p>

<p><code>#import &lt;<a class="el" href="_dynamics_watch_8h_source.html">DynamicsWatch.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>This class enables secure communication from a Dynamics app running on WatchOS with a companion Dynamics app running on iOS.</p>
<h3>Introduction</h3>
<p>Use this class from a watchOS app to initiate secure authentication and communication with an iOS companion app. This interface is not required within the iOS app. Instead the companion app should be built with BlackBerry Dynamics and utilize Apple's WCSession API to perform messaging with the watch.</p>
<p>Prerequisites:</p><ul>
<li>The watchOS app and iOS companion app must be integrated with BlackBerry Dynamics v12.1 or later.</li>
<li>The Apple watch must be paired with the same user's iPhone.</li>
<li>Enterprise policy must permit the use of a wearable device.</li>
<li>The watch must be unlocked and worn on the wrist.</li>
</ul>
<h3>Setting Up Secure Communications</h3>
<p>Setup and pairing of the watch and companion app is done using <code>secureCommunicationSession</code> within the WatchOS app. When successful, the completion block <code>authStatus</code> will be <code>YES</code> and the WatchCommunicationState changed to <code>WatchCommunicationReady</code>. The other states and transitions are shown in the following diagram.</p>
<div class="image">
<img src="st06 WatchCommunicationState.png" alt=""/>
<div class="caption">
Diagram of watchCommunicationState for BlackBerry Dynamics WatchOS application</div></div>
<h4>Behavior On Companion App</h4>
<p>It is best practice to first negotiate a secure communication session from the WatchOS app. This is because <code>secureCommunicationSession</code> is not available on the iOS companion app. If a WCSession <code>sendMessage</code> or <code>sendMessageData</code> is sent from the companion app prior to negotiation of the secure communication session then this will trigger the negotiation of the keys and the user will be required to confirm the 6 digit code on both devices. In this case the initiating message will need to be resent. Other APIs which initiate communication from the companion app to the watch are not currently handled in the same way, for example, <code>transferFile</code>, <code>transferUserInfo</code>, <code>transferCurrentComplicationUserInfo</code> and <code>updateApplicationContext</code>. Therefore use of these APIs without a <code>secureCommunicationSession</code> may fail.</p>
<h3>Monitoring Watch Communication State</h3>
<p>The WatchCommunicationState can be monitored by subscribing to the Notification for the key WatchCommunicationStateKey</p>
<div class="fragment"><div class="line">NotificationCenter.default.addObserver(<span class="keyword">self</span>, selector: #selector(watchCommStateChanged(_: )), name: NSNotification.Name(rawValue: <a class="code" href="_dynamics_watch_8h.html#aa9909ef21e4ceb0316450e693d72e68b">WatchCommunicationStateKey</a>), <span class="keywordtype">object</span>: nil)</div>
</div><!-- fragment --><p>The notification can be processed per this example code:</p>
<div class="fragment"><div class="line"> @objc func watchCommStateChanged(_ notification:Notification?) {</div>
<div class="line">   guard let notif = notification <span class="keywordflow">else</span> {</div>
<div class="line">   <span class="comment">//No notification</span></div>
<div class="line">       <span class="keywordflow">return</span></div>
<div class="line">   }</div>
<div class="line">   <span class="keywordflow">if</span> let watchCommState = <a class="code" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">WatchCommunicationState</a>(rawValue: notif.userInfo?[<a class="code" href="_dynamics_watch_8h.html#aa9909ef21e4ceb0316450e693d72e68b">WatchCommunicationStateKey</a>] as! Int) {</div>
<div class="line">      updateWatchCommString(state:watchCommState)</div>
<div class="line">   }</div>
<div class="line">}</div>
<div class="line"> * </div>
</div><!-- fragment --><h3>Sending Messages</h3>
<p>Once secure communication is setup, use Apple's WCSession object to handle sending and receive messages between the watchOS and iOS companion app. An example using the 'sendMessage' function and associated 'replyHandler' can be found in the Dynamics WatchMessenger sample app (see below).</p>
<h3>Handling Messaging Errors</h3>
<p>If an error is encountered when sending a message, the replies from the <code>replyHandler</code> in WCSessionDelegate session(_:didReceiveMessageData:) will be in the form of:</p>
<div class="fragment"><div class="line">@{<a class="code" href="_dynamics_watch_8h.html#ad63f6d606af06a6849e2c7bfde9cdf8c">WatchMessageErrorKey</a>:[NSError errorWithDomain:<a class="code" href="_dynamics_watch_8h.html#ae6fc271675fafaba27923c45cc0d9ece">WatchMessageErrorDomain</a></div>
<div class="line">                                           code:<a class="code" href="_dynamics_watch_8h.html#a0bf198d757b912122d252db0c5d715be">WatchMessageErrorNeedsCommunicationSecured</a> </div>
<div class="line">                                       userInfo:@{<a class="code" href="_dynamics_watch_8h.html#ac84c93fd0c6ccd4197a575b768ca1c6c">WatchMessageErrorUserInfoKey</a>:<span class="stringliteral">@&quot;Waiting to establish trust.&quot;</span>}]}</div>
</div><!-- fragment --><p>The error code in the <code>NSError</code> object indicates what the reason is for the error.</p>
<p>Possible errors are:</p><ul>
<li><a class="el" href="_dynamics_watch_8h.html#a2e683616982ab87a7e5a8366948a7bd9">WatchMessageErrorPolicyNotAllowed</a></li>
<li><a class="el" href="_dynamics_watch_8h.html#adcf8917bbfa40444fd1c64a782823c35">WatchMessageErrorRemoteLocked</a></li>
<li><a class="el" href="_dynamics_watch_8h.html#a7be6878cb07c675632c708cd29b68ef1">WatchMessageErrorIncompliant</a></li>
<li><a class="el" href="_dynamics_watch_8h.html#a0bf198d757b912122d252db0c5d715be">WatchMessageErrorNeedsCommunicationSecured</a></li>
<li><a class="el" href="_dynamics_watch_8h.html#a2f2b8678e3d503785f2816f8ea546aa5">WatchMessageErrorOther</a></li>
</ul>
<h3>Secure File System</h3>
<p>The secure file system is part of the BlackBerry Dynamics Watch Secure Storage feature.</p>
<p>For applications, the BlackBerry Dynamics secure file system behaves like the default file system, with the following differences. All data within the secure file system is stored on the device in an encrypted form. Directory and file names are also encrypted. The secure file system cannot be accessed until the Watch Communication is secured, see </p><h3>Setting Up Secure Communications</h3>
<p>.</p>
<p>Use <a class="el" href="interface_g_d_file_manager.html" title="Secure File System.">GDFileManager</a> instead of NSFileManager in the Watch app to access the Secure File System.</p>
<p>For more info see <a href="https://developer.blackberry.com/files/blackberry-dynamics/ios/interface_g_d_file_manager.html">GDFileManager</a></p>
<h3>Sample Application</h3>
<p>Get started using the WatchOS and iOS sample app called 'WatchMessenger' located on BlackBerry's GitHub.</p>
<p>See <a href="https://github.com/blackberry/BlackBerry-Dynamics-iOS-Samples" target="_blank">BlackBerry Dynamics iOS Samples</a>. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:a9c73690b9f5e507f2addd10cbdb7f237"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_dynamics_watch.html#a9c73690b9f5e507f2addd10cbdb7f237">secureCommunicationSession:</a></td></tr>
<tr class="memdesc:a9c73690b9f5e507f2addd10cbdb7f237"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup Secure Communication.  <a href="interface_dynamics_watch.html#a9c73690b9f5e507f2addd10cbdb7f237">More...</a><br /></td></tr>
<tr class="separator:a9c73690b9f5e507f2addd10cbdb7f237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53983a5ae0fab3fc7ca9e7a762ce317"><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">WatchCommunicationState</a>)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_dynamics_watch.html#ae53983a5ae0fab3fc7ca9e7a762ce317">watchCommunicationState</a></td></tr>
<tr class="memdesc:ae53983a5ae0fab3fc7ca9e7a762ce317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Watch Communication States.  <a href="interface_dynamics_watch.html#ae53983a5ae0fab3fc7ca9e7a762ce317">More...</a><br /></td></tr>
<tr class="separator:ae53983a5ae0fab3fc7ca9e7a762ce317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e3ab019e0692eeae5a8d17219261771"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interface_dynamics_watch.html#a7e3ab019e0692eeae5a8d17219261771">resetTrustBetweenDevices</a></td></tr>
<tr class="memdesc:a7e3ab019e0692eeae5a8d17219261771"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the connection between watch and companion app.  <a href="interface_dynamics_watch.html#a7e3ab019e0692eeae5a8d17219261771">More...</a><br /></td></tr>
<tr class="separator:a7e3ab019e0692eeae5a8d17219261771"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Class Methods</h2></td></tr>
<tr class="memitem:a704d951bd82c6583015d6f2e140a8253"><td class="memItemLeft" align="right" valign="top">(instancetype)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interface_dynamics_watch.html#a704d951bd82c6583015d6f2e140a8253">sharedBBDWatchIOS</a></td></tr>
<tr class="memdesc:a704d951bd82c6583015d6f2e140a8253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a reference to the BBDWatchIOS interface object.  <a href="interface_dynamics_watch.html#a704d951bd82c6583015d6f2e140a8253">More...</a><br /></td></tr>
<tr class="separator:a704d951bd82c6583015d6f2e140a8253"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a2f02411240b4fd213e0110fac8164b86"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">WatchCommunicationState</a> { <br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a8804cfd70c401edf6225ba39e1e5a7b2">WatchCommunicationStateNotSet</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a6c127cfa5216d50e58d2fec8e21d5370">WatchCommunicationResetting</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86aaf51d2c056018d95e91fbc051bc20e49">WatchCommunicationReady</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a09773390eb81a7bc1c2e4561799baa35">WatchCommunicationNeedsConfirmOnPhone</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86ad55d21e0e1c3b056679251efd9d5c5a0">WatchCommunicationNeedsConfirmOnWatch</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a8433e11b56e6baf63833ae30f66e4c74">WatchCommunicationNeedsWristDetected</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a150f6d8c91ff1f7a1c58a92e6d5b58d0">WatchCommunicationNeedsFirstLaunch</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86abc7e678166f4bd7a525db8720df821ef">WatchCommunicationSecuringFailed</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a8f8aa867e062670d820ae0012952cee2">WatchCommunicationNotAllowedByPolicy</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a7daab09083cbdf4c33cc68eb0e393725">WatchCommunicationNotAllowedRemoteLocked</a>, 
<br />
&#160;&#160;<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86a935ac514282e9a6a9df7725eb6213f5e">WatchCommunicationNotAllowedIncompliant</a>
<br />
 }</td></tr>
<tr class="memdesc:a2f02411240b4fd213e0110fac8164b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constants for WatchCommunicationState type.  <a href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">More...</a><br /></td></tr>
<tr class="separator:a2f02411240b4fd213e0110fac8164b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc27be7c0bb683422de9cdbe6df74239"><td class="memItemLeft" align="right" valign="top">typedef void(^&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_dynamics_watch.html#abc27be7c0bb683422de9cdbe6df74239">authCompletionBlock</a>) (BOOL)</td></tr>
<tr class="memdesc:abc27be7c0bb683422de9cdbe6df74239"><td class="mdescLeft">&#160;</td><td class="mdescRight">Conditional block indicating if authentication between the watch and companion app is successful.  <a href="interface_dynamics_watch.html#abc27be7c0bb683422de9cdbe6df74239">More...</a><br /></td></tr>
<tr class="separator:abc27be7c0bb683422de9cdbe6df74239"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="abc27be7c0bb683422de9cdbe6df74239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc27be7c0bb683422de9cdbe6df74239">&#9670;&nbsp;</a></span>authCompletionBlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (typedef void(^ authCompletionBlock(BOOL))</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><code>boolean</code> indicating if the communication has been secured.</dd></dl>
<p><code>YES</code> indicates communication is secured between the watch and companion app. When the result is <code>YES</code> <a class="el" href="interface_dynamics_watch.html#ae53983a5ae0fab3fc7ca9e7a762ce317">watchCommunicationState</a> will also be set to <a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86aaf51d2c056018d95e91fbc051bc20e49">WatchCommunicationReady</a>. </p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a2f02411240b4fd213e0110fac8164b86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f02411240b4fd213e0110fac8164b86">&#9670;&nbsp;</a></span>WatchCommunicationState</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (enum) <a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">WatchCommunicationState</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This enumeration represents the state of the communication channel between watch and companion app. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a8804cfd70c401edf6225ba39e1e5a7b2"></a>WatchCommunicationStateNotSet&#160;</td><td class="fielddoc"><p>The secure communication between watch and iOS application has not been started. </p>
<p>This is the initial state. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a6c127cfa5216d50e58d2fec8e21d5370"></a>WatchCommunicationResetting&#160;</td><td class="fielddoc"><p>The secure communication between watch and iOS companion application is being reset. </p>
<p>This state is triggered by calling <a class="el" href="interface_dynamics_watch.html#a7e3ab019e0692eeae5a8d17219261771">resetTrustBetweenDevices</a> or if an encrypted message is received that cannot be decrypted with the currently provisioned encryption keys. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86aaf51d2c056018d95e91fbc051bc20e49"></a>WatchCommunicationReady&#160;</td><td class="fielddoc"><p>The secure communication between watch and iOS companion application is authenticated and ready for use. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a09773390eb81a7bc1c2e4561799baa35"></a>WatchCommunicationNeedsConfirmOnPhone&#160;</td><td class="fielddoc"><p>A validation code has been sent to the phone which the user needs to confirm. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86ad55d21e0e1c3b056679251efd9d5c5a0"></a>WatchCommunicationNeedsConfirmOnWatch&#160;</td><td class="fielddoc"><p>A validation code has been received on the watch which the user needs to confirm. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a8433e11b56e6baf63833ae30f66e4c74"></a>WatchCommunicationNeedsWristDetected&#160;</td><td class="fielddoc"><p>The watch must be worn by the user and secured with a passcode to enable communication. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a150f6d8c91ff1f7a1c58a92e6d5b58d0"></a>WatchCommunicationNeedsFirstLaunch&#160;</td><td class="fielddoc"><p>The companion app must be launched on iPhone to establish a connection. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86abc7e678166f4bd7a525db8720df821ef"></a>WatchCommunicationSecuringFailed&#160;</td><td class="fielddoc"><p>Securing of the communication channel was cancelled by the user or a validation code was rejected. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a8f8aa867e062670d820ae0012952cee2"></a>WatchCommunicationNotAllowedByPolicy&#160;</td><td class="fielddoc"><p>Communication failed because the enterprise policy does not permit use of a wearable device. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a7daab09083cbdf4c33cc68eb0e393725"></a>WatchCommunicationNotAllowedRemoteLocked&#160;</td><td class="fielddoc"><p>Communication failed because the companion app is remote locked. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2f02411240b4fd213e0110fac8164b86a935ac514282e9a6a9df7725eb6213f5e"></a>WatchCommunicationNotAllowedIncompliant&#160;</td><td class="fielddoc"><p>Communication failed because the devices are incompliant with Device policies. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Method Documentation</h2>
<a id="a704d951bd82c6583015d6f2e140a8253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a704d951bd82c6583015d6f2e140a8253">&#9670;&nbsp;</a></span>sharedBBDWatchIOS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (instancetype) sharedBBDWatchIOS </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Communication must be started by initializing sharedBBDWatchIOS prior to sending or receiving secure messages. If the watch receives a secured message prior to this initialization it will not be decrypted.</p>
<p>This function returns a reference to the Dynamics Watch object. It can be called in the <code>session(_:activationDidCompleteWith:error:)</code> handler of the watch application.</p>
<dl class="section return"><dt>Returns</dt><dd>Reference that can be used to call, for example <code>secureCommunicationSession</code>. </dd></dl>

</div>
</div>
<a id="a9c73690b9f5e507f2addd10cbdb7f237"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c73690b9f5e507f2addd10cbdb7f237">&#9670;&nbsp;</a></span>secureCommunicationSession:</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) secureCommunicationSession: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interface_dynamics_watch.html#abc27be7c0bb683422de9cdbe6df74239">authCompletionBlock</a>)&#160;</td>
          <td class="paramname"><em>authStatus</em></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Communication must be secured by running this method prior to sending and receiving messages with the watch. Authentication status is available in the authStatus callback.</p>
<p>If a companion app is unavailable the watch displays an alert indicating that the companion app cannot be reached.</p>
<p>The enterprise policy assigned to the user must permit the use of a wearable device. If it is disabled the watch displays an alert indicating that the policy is disabled and the organization administrator should be contacted. </p>

</div>
</div>
<a id="ae53983a5ae0fab3fc7ca9e7a762ce317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae53983a5ae0fab3fc7ca9e7a762ce317">&#9670;&nbsp;</a></span>watchCommunicationState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">WatchCommunicationState</a>) watchCommunicationState </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>See enumeration <a class="el" href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">WatchCommunicationState</a> </p>

</div>
</div>
<a id="a7e3ab019e0692eeae5a8d17219261771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e3ab019e0692eeae5a8d17219261771">&#9670;&nbsp;</a></span>resetTrustBetweenDevices</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) resetTrustBetweenDevices </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invoke this API to reset trust between watch and companion app. This action will wipe all contents from the Dynamics watch app and initiate the setup of a new trust negotiation. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_dynamics_watch_8h_source.html">DynamicsWatch.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="a_dynamics_watch_8h_html_aa9909ef21e4ceb0316450e693d72e68b"><div class="ttname"><a href="_dynamics_watch_8h.html#aa9909ef21e4ceb0316450e693d72e68b">WatchCommunicationStateKey</a></div><div class="ttdeci">const NSString * WatchCommunicationStateKey</div><div class="ttdoc">Watch Communication State Info key for watch.</div></div>
<div class="ttc" id="a_dynamics_watch_8h_html_a0bf198d757b912122d252db0c5d715be"><div class="ttname"><a href="_dynamics_watch_8h.html#a0bf198d757b912122d252db0c5d715be">WatchMessageErrorNeedsCommunicationSecured</a></div><div class="ttdeci">const NSInteger WatchMessageErrorNeedsCommunicationSecured</div><div class="ttdoc">Communication needs to be secured.</div></div>
<div class="ttc" id="ainterface_dynamics_watch_html_a2f02411240b4fd213e0110fac8164b86"><div class="ttname"><a href="interface_dynamics_watch.html#a2f02411240b4fd213e0110fac8164b86">DynamicsWatch::WatchCommunicationState</a></div><div class="ttdeci">WatchCommunicationState</div><div class="ttdoc">Constants for WatchCommunicationState type.</div><div class="ttdef"><b>Definition:</b> DynamicsWatch.h:178</div></div>
<div class="ttc" id="a_dynamics_watch_8h_html_ad63f6d606af06a6849e2c7bfde9cdf8c"><div class="ttname"><a href="_dynamics_watch_8h.html#ad63f6d606af06a6849e2c7bfde9cdf8c">WatchMessageErrorKey</a></div><div class="ttdeci">const NSString * WatchMessageErrorKey</div><div class="ttdoc">Error key for watch message error.</div></div>
<div class="ttc" id="a_dynamics_watch_8h_html_ae6fc271675fafaba27923c45cc0d9ece"><div class="ttname"><a href="_dynamics_watch_8h.html#ae6fc271675fafaba27923c45cc0d9ece">WatchMessageErrorDomain</a></div><div class="ttdeci">const NSString * WatchMessageErrorDomain</div><div class="ttdoc">Error domain for watch message error.</div></div>
<div class="ttc" id="a_dynamics_watch_8h_html_ac84c93fd0c6ccd4197a575b768ca1c6c"><div class="ttname"><a href="_dynamics_watch_8h.html#ac84c93fd0c6ccd4197a575b768ca1c6c">WatchMessageErrorUserInfoKey</a></div><div class="ttdeci">const NSString * WatchMessageErrorUserInfoKey</div><div class="ttdoc">Error User Info key for watch message error.</div></div>
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="interface_dynamics_watch.html">DynamicsWatch</a></li>
    <li class="footer">
Generated Wed Mar 12 2025 12:06:26
with v1.8.17 <a href="http://www.doxygen.org/index.html" target="_blank">doxygen</a >.
Version 13.1.0.48.
© 2025 BlackBerry Limited. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
