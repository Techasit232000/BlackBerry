<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlackBerry Dynamics: Application User Interface Restrictions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen_13.1.0.48.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra_13.1.0.48.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
	<div id="titleheadings">
	<ul> 
		<li id="projectlogo">
	 		<a id="corplink" href="https://blackberry.com/"><img alt="Logo" src="BlackBerryLogo.png"/></a></li>
	 	<li id="projectname">BlackBerry Dynamics</li>
	  	<li id="projectbrief">Runtime library for iOS applications</li>
	  	<li id="projectnumber">13.1.0.48</li>
	 </ul>
	</div>
	 <div id="titlelinks">
	 		<a href="https://developers.blackberry.com">BlackBerry Developers</a>
	 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_app_user_interface_restrictions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Application User Interface Restrictions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The BlackBerry Dynamics runtime monitors the application user interface in order to enforce a number of enterprise security policies. For example, there may be a policy that the user must always enter their security password when the application makes the transition from background to foreground. There may also be a policy that the user interface must be locked after a period of inactivity.</p>
<p>The application user interface must observe a number of restrictions in order to enable monitoring by the runtime. The application code mustn't depend on having control of the user interface at all times.</p>
<h2>User interface control</h2>
<p>BlackBerry Dynamics will, from time to time, take control of the application user interface. It does this in order to enforce enterprise security policies. A BlackBerry Dynamics application's user interface (UI) is divided into the following parts, for the purposes of control.</p>
<p><em>Runtime UI</em>. The screens and other user interface elements that are built in to the BlackBerry Dynamics runtime. This includes the screens on which the end user sets and enters their security password, for example.</p>
<p><em>Application UI</em>. All user interface elements that aren't part of the runtime UI, above. These could be defined in the application code or in another third party library, for example.</p>
<p>When BlackBerry Dynamics takes control of the user interface, the runtime UI is displayed in front of the application UI, which is therefore hidden.</p>
<h2>User interface programming</h2>
<p>If the application UI is in front, general user interface programming features can be used, with the following restrictions.</p><ul>
<li>The application mustn't close nor release the application window.</li>
<li>Access to the application window must be via the <code>window</code> property of the main app delegate, see under Access to the application window, below.</li>
<li>Programming with multiple windows isn't supported.</li>
</ul>
<p>If the runtime UI is in front:</p><ul>
<li>The application code can create new UI elements but:<ul>
<li>These elements will be hidden, like the rest of the application UI.</li>
<li>It has been found that elements of the native UI programming interface, Cocoa Touch, can have unexpected and undocumented behaviours when hidden. For this reason, it may be best to avoid UI programming if the runtime UI is in front. See below for how to monitor which UI is in front.</li>
</ul>
</li>
<li>The application code can remove and destroy elements of the application UI, in the usual way.</li>
<li>Restrictions that apply when the application UI is in front, see above, also apply.</li>
</ul>
<p>The runtime UI will only stay in front for as long as is necessary to enforce enterprise policies. For example, if the user is required by policy to enter their password then the runtime UI will stay in front until they have done so. After that, the runtime UI will be removed and the application UI will be revealed.</p>
<p>The application code can monitor which UI is in front, see the code snippets for Monitoring user interface control, below.</p>
<h2>Access to the application window</h2>
<p>The main <code>UIApplication</code> instance and the main app delegate have a number of window properties whose values are modified by BlackBerry Dynamics. Supported use is as follows.</p><ul>
<li>Main app delegate <code>window</code> property.<br  />
 Use this property to obtain a window object, <code>UIWindow</code> instance, in which to display the application UI. The object will be suitable to have its root view controller set to the initial view controller of the main storyboard, for example. See under Instantiating the application user interface, below, for sample code.</li>
<li><code>UIApplication</code> <code>keyWindow</code> property.<br  />
 Don't use this property to obtain a reference to the application window. It will sometimes refer to an element in the runtime UI. Elements of the runtime UI mustn't be modified nor operated upon by the application code.</li>
<li><code>UIApplication</code> <code>windows</code> property.<br  />
 Don't use this property to obtain a reference to the application window. The value of this property will be an array of window objects, some of which will be part of the runtime UI. Elements of the runtime UI mustn't be modified nor operated upon by the application code.</li>
</ul>
<h2>Code Snippets</h2>
<p>The following code snippets illustrate some common tasks. </p><h3>Instantiating the application user interface</h3>
<p>The following code snippet shows an approach, sometimes known as programmatic storyboard loading, to instantiation of the application user interface. </p><div class="fragment"><div class="line"><span class="comment">// Call this when the end user is authorized, i.e. in the handling of one of:</span></div>
<div class="line"><span class="comment">// -   GDStateChangeNotification in which GDState isAuthorized became true </span></div>
<div class="line"><span class="comment">//     for the first time.</span></div>
<div class="line"><span class="comment">// -   First GDAppEvent with type GDAppEventAuthorized.</span></div>
<div class="line"> </div>
<div class="line">- (void)instantiateUI {</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Only initialize the UI once.</span></div>
<div class="line"><span class="keyword">static</span> dispatch_once_t onceToken;</div>
<div class="line">dispatch_once(&amp;onceToken, ^{</div>
<div class="line">     <span class="comment">// Instantiate the Main storyboard.</span></div>
<div class="line">     UIStoryboard *uiStoryboard = [UIStoryboard storyboardWithName:<span class="stringliteral">@&quot;Main&quot;</span></div>
<div class="line">                                                            bundle:nil];</div>
<div class="line">     <span class="comment">// Instantiate the intial view controller.</span></div>
<div class="line">     UIViewController *viewController =</div>
<div class="line">         [uiStoryboard instantiateInitialViewController];</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Set the root view controller of the application window to the initial</span></div>
<div class="line">     <span class="comment">// view controller so that the Main storyboard gets loaded.</span></div>
<div class="line">     [UIApplication sharedApplication].delegate.window.rootViewController =</div>
<div class="line">         viewController;</div>
<div class="line">     });</div>
<div class="line">}</div>
</div><!-- fragment --><p>The above snippet illustrates the following approach.</p><ul>
<li>The application has a first or only storyboard, named Main.</li>
<li>No main storyboard is configured for automatic loading, i.e. there isn't a UIMainStoryboardFile property in the Info.plist file (not shown in the snippet).</li>
<li>The application code initiates BlackBerry Dynamics authorization of the end user in its <code>didFinishLaunchingWithOptions:</code> implementation (not shown in the snippet).</li>
<li>When authorization of the end user is notified, the application instantiates its main storyboard, and the corresponding intial view controller, and sets it as the root view controller so that the storyboard gets loaded.</li>
</ul>
<h3>Monitoring user interface control with native notification</h3>
<p>The following code snippets shows how to monitor user interface control by using the native notification mechanism, <code>NSNotification</code>. </p><div class="fragment"><div class="line"><span class="comment">// Register an observer.</span></div>
<div class="line">[[NSNotificationCenter defaultCenter] addObserver:<span class="keyword">self</span></div>
<div class="line">                                         selector:<span class="keyword">@selector</span>(gdStateChanged:)</div>
<div class="line">                                             name:<a class="code" href="group__gdstateconstants.html#gaebf21e1f6cd781364a4575886d5337bd">GDStateChangeNotification</a></div>
<div class="line">                                           <span class="keywordtype">object</span>:nil];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Method invoked on state change.</span></div>
<div class="line">- (void)gdStateChanged:(NSNotification*)notification</div>
<div class="line">{</div>
<div class="line">     NSDictionary* userInfo = [notification userInfo];</div>
<div class="line">     NSString *propertyName = [userInfo objectForKey:<a class="code" href="group__gdstateconstants.html#ga41971c39dd096a33933d2ddad0ffd06c">GDStateChangeKeyProperty</a>];</div>
<div class="line">     <a class="code" href="interface_g_d_state.html">GDState</a>* state = [userInfo objectForKey:<a class="code" href="group__gdstateconstants.html#ga8b0a1b94b2c87d674b22d0e231b87abb">GDStateChangeKeyCopy</a>];</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// User Interface state and Current Screen</span></div>
<div class="line">     <span class="keywordflow">if</span> ([propertyName isEqualToString:<a class="code" href="group__gdstateconstants.html#gaffea2f929dcd3dddf1dd01f1dbe59e3f">GDKeyUserInterfaceState</a>])</div>
<div class="line">     {</div>
<div class="line">         <span class="comment">// ToDo: User interface changed - inspect ‘state.userInterfaceState’</span></div>
<div class="line">     }</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([propertyName isEqualToString:<a class="code" href="group__gdstateconstants.html#ga9f4f7d4bba1f8db9dc199b5c613b4084">GDKeyIsAuthorized</a>])</div>
<div class="line">     {</div>
<div class="line">         <span class="comment">// Authorization state changed - inspect ‘state.isAuthorized’</span></div>
<div class="line">         <span class="keywordflow">if</span> (state.<a class="code" href="interface_g_d_state.html#a33350671d615e5f10eca90b44d50bbe0">isAuthorized</a>) [<span class="keyword">self</span> instantiateUI];</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Note: can also be used to receive notification of change in current</span></div>
<div class="line">     <span class="comment">// screen and &#39;reasonNotAuthorized&#39;:</span></div>
<div class="line">     <span class="comment">// GDKeyCurrentScreen - inspect ‘state.currentScreen’</span></div>
<div class="line">     <span class="comment">// GDKeyReasonNotAuthorized - inspect ‘state.reasonNotAuthorized’</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The above snippet illustrates the following.</p><ul>
<li>The BlackBerry Dynamics runtime will dispatch an <code>NSNotification</code> when its state changes. The constant <code>GDStateChangeNotification</code> gives the name of the notification.</li>
<li>The application code can register to receive the state-change notification using the native programming interface, for example <code>NSNotificationCenter</code> <code>addObserver</code>.</li>
<li>The control state can be checked by inspecting the <code><a class="el" href="interface_g_di_o_s.html#adb89b3b4259f2c8333b5b6b90363cc6b" title="Observable representation of authorization state and user interface state.">GDiOS.state</a></code> object, which will be an instance of the <code><a class="el" href="interface_g_d_state.html" title="BlackBerry Dynamics run-time state.">GDState</a></code> class. The <code>userInterfaceState</code> property will have the value <code>GDUIStateGDLibraryInFront</code> if the runtime UI is in front.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="interface_g_d_state.html">GDState class reference</a>.</dd></dl>
<h3>Monitoring user interface control with key-value observing</h3>
<p>The following code snippets shows how to monitor user interface control by using key-value observing (KVO).</p>
<div class="fragment"><div class="line"><span class="comment">// Get a reference to the GDState object from the singleton GDiOS instance.</span></div>
<div class="line"><a class="code" href="interface_g_d_state.html">GDState</a> *state = [<a class="code" href="interface_g_di_o_s.html">GDiOS</a> sharedInstance].state;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Register KVO observers.</span></div>
<div class="line">NSKeyValueObservingOptions keyValueOptions =</div>
<div class="line">    (NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld);</div>
<div class="line">[state addObserver:<span class="keyword">self</span></div>
<div class="line">        forKeyPath:<a class="code" href="group__gdstateconstants.html#gaffea2f929dcd3dddf1dd01f1dbe59e3f">GDKeyUserInterfaceState</a></div>
<div class="line">           options:keyValueOptions</div>
<div class="line">           context:NULL];</div>
<div class="line">[state addObserver:<span class="keyword">self</span></div>
<div class="line">        forKeyPath:<a class="code" href="group__gdstateconstants.html#ga9f4f7d4bba1f8db9dc199b5c613b4084">GDKeyIsAuthorized</a></div>
<div class="line">           options:keyValueOptions</div>
<div class="line">           context:NULL];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Note: GDState also allows observation of the following key paths:</span></div>
<div class="line"><span class="comment">// -   GDKeyCurrentScreen.</span></div>
<div class="line"><span class="comment">// -   GDKeyReasonNotAuthorized.</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Implement KVO method.</span></div>
<div class="line">- (void)observeValueForKeyPath:(NSString *)keyPath</div>
<div class="line">                      ofObject:(id)<span class="keywordtype">object</span></div>
<div class="line">                        change:(NSDictionary *)change</div>
<div class="line">                       context:(<span class="keywordtype">void</span> *)context {</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">if</span> ([keyPath isEqualToString:<a class="code" href="group__gdstateconstants.html#gaffea2f929dcd3dddf1dd01f1dbe59e3f">GDKeyUserInterfaceState</a>]) {</div>
<div class="line">             <a class="code" href="group__gdstateconstants.html#gade4174404878aa67488fbb94298a12a3">GDUserInterfaceState</a> newState = (<a class="code" href="group__gdstateconstants.html#gade4174404878aa67488fbb94298a12a3">GDUserInterfaceState</a>)</div>
<div class="line">                 [[change objectForKey:NSKeyValueChangeNewKey] integerValue];</div>
<div class="line">     }</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([keyPath isEqualToString:<a class="code" href="group__gdstateconstants.html#ga9f4f7d4bba1f8db9dc199b5c613b4084">GDKeyIsAuthorized</a>]) {</div>
<div class="line">             BOOL isAuthorized = (BOOL)</div>
<div class="line">                 [[change objectForKey:NSKeyValueChangeNewKey] boolValue];</div>
<div class="line">             <span class="keywordflow">if</span>(isAuthorized) [<span class="keyword">self</span> instantiateUI];</div>
<div class="line">     }</div>
<div class="line">     <span class="keywordflow">else</span> {</div>
<div class="line">             [super observeValueForKeyPath:keyPath</div>
<div class="line">                                  ofObject:<span class="keywordtype">object</span></div>
<div class="line">                                    change:change</div>
<div class="line">                                   context:context];</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Note: can also be used to monitor change in current screen and</span></div>
<div class="line">     <span class="comment">// &#39;reasonNotAuthorized&#39;:</span></div>
<div class="line">     <span class="comment">// GDKeyCurrentScreen - GDLibraryScreen</span></div>
<div class="line">     <span class="comment">// GDKeyReasonNotAuthorized - NSString</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The above snippet illustrates the following.</p><ul>
<li>The BlackBerry Dynamics programming interface includes objects with properties that comply with KVO. One example is the <code><a class="el" href="interface_g_di_o_s.html#adb89b3b4259f2c8333b5b6b90363cc6b" title="Observable representation of authorization state and user interface state.">GDiOS.state</a></code> object, which will be an instance of the <code><a class="el" href="interface_g_d_state.html" title="BlackBerry Dynamics run-time state.">GDState</a></code> class.</li>
<li>The application code can register observers for these properties using the native programming interface, for example <code><a class="el" href="class_n_s_object-p.html">NSObject</a></code> <code>addObserver</code>.</li>
<li>The control state can be checked by observing the property with the key path given by the <code>GDKeyUserInterfaceState</code> constant, which will be the <code><a class="el" href="interface_g_d_state.html" title="BlackBerry Dynamics run-time state.">GDState</a></code> <code>userInterfaceState</code> property. It will take the value <code>GDUIStateGDLibraryInFront</code> if the runtime UI is in front.</li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="interface_g_d_state.html">GDState class reference</a>. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="ainterface_g_di_o_s_html"><div class="ttname"><a href="interface_g_di_o_s.html">GDiOS</a></div><div class="ttdoc">BlackBerry Dynamics Runtime object interface, including authorization.</div><div class="ttdef"><b>Definition:</b> GDiOS.h:272</div></div>
<div class="ttc" id="agroup__gdstateconstants_html_ga41971c39dd096a33933d2ddad0ffd06c"><div class="ttname"><a href="group__gdstateconstants.html#ga41971c39dd096a33933d2ddad0ffd06c">GDStateChangeKeyProperty</a></div><div class="ttdeci">NSString *const GDStateChangeKeyProperty</div><div class="ttdoc">Key in the NSNotification userInfo dictionary for the name of the property that changed.</div></div>
<div class="ttc" id="agroup__gdstateconstants_html_gade4174404878aa67488fbb94298a12a3"><div class="ttname"><a href="group__gdstateconstants.html#gade4174404878aa67488fbb94298a12a3">GDUserInterfaceState</a></div><div class="ttdeci">GDUserInterfaceState</div><div class="ttdoc">User interface states.</div><div class="ttdef"><b>Definition:</b> GDState.h:173</div></div>
<div class="ttc" id="agroup__gdstateconstants_html_ga9f4f7d4bba1f8db9dc199b5c613b4084"><div class="ttname"><a href="group__gdstateconstants.html#ga9f4f7d4bba1f8db9dc199b5c613b4084">GDKeyIsAuthorized</a></div><div class="ttdeci">NSString *const GDKeyIsAuthorized</div><div class="ttdoc">Path for KVO of the GDState isAuthorized property.</div></div>
<div class="ttc" id="ainterface_g_d_state_html_a33350671d615e5f10eca90b44d50bbe0"><div class="ttname"><a href="interface_g_d_state.html#a33350671d615e5f10eca90b44d50bbe0">GDState::isAuthorized</a></div><div class="ttdeci">BOOL isAuthorized</div><div class="ttdoc">BlackBerry Dynamics authorization state.</div><div class="ttdef"><b>Definition:</b> GDState.h:348</div></div>
<div class="ttc" id="agroup__gdstateconstants_html_gaffea2f929dcd3dddf1dd01f1dbe59e3f"><div class="ttname"><a href="group__gdstateconstants.html#gaffea2f929dcd3dddf1dd01f1dbe59e3f">GDKeyUserInterfaceState</a></div><div class="ttdeci">NSString *const GDKeyUserInterfaceState</div><div class="ttdoc">Path for KVO of the GDState userInterfaceState property.</div></div>
<div class="ttc" id="agroup__gdstateconstants_html_ga8b0a1b94b2c87d674b22d0e231b87abb"><div class="ttname"><a href="group__gdstateconstants.html#ga8b0a1b94b2c87d674b22d0e231b87abb">GDStateChangeKeyCopy</a></div><div class="ttdeci">NSString *const GDStateChangeKeyCopy</div><div class="ttdoc">Key in the NSNotification userInfo dictionary for the as-after copy of the GDState object.</div></div>
<div class="ttc" id="ainterface_g_d_state_html"><div class="ttname"><a href="interface_g_d_state.html">GDState</a></div><div class="ttdoc">BlackBerry Dynamics run-time state.</div><div class="ttdef"><b>Definition:</b> GDState.h:322</div></div>
<div class="ttc" id="agroup__gdstateconstants_html_gaebf21e1f6cd781364a4575886d5337bd"><div class="ttname"><a href="group__gdstateconstants.html#gaebf21e1f6cd781364a4575886d5337bd">GDStateChangeNotification</a></div><div class="ttdeci">NSString *const GDStateChangeNotification</div><div class="ttdoc">NSNotification name for GDState change notifications.</div></div>
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="developmentguides.html">Development Guides</a></li>
    <li class="footer">
Generated Wed Mar 12 2025 12:06:26
with v1.8.17 <a href="http://www.doxygen.org/index.html" target="_blank">doxygen</a >.
Version 13.1.0.48.
© 2025 BlackBerry Limited. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
