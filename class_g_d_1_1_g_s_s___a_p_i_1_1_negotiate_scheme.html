<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlackBerry Dynamics: NegotiateScheme Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen_13.1.0.48.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra_13.1.0.48.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
	<div id="titleheadings">
	<ul> 
		<li id="projectlogo">
	 		<a id="corplink" href="https://blackberry.com/"><img alt="Logo" src="BlackBerryLogo.png"/></a></li>
	 	<li id="projectname">BlackBerry Dynamics</li>
	  	<li id="projectbrief">Runtime library for iOS applications</li>
	  	<li id="projectnumber">13.1.0.48</li>
	 </ul>
	</div>
	 <div id="titlelinks">
	 		<a href="https://developers.blackberry.com">BlackBerry Developers</a>
	 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">NegotiateScheme Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>GSS programming interface, including SPNEGO (C++).  
 <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_g_d_negotiate_scheme_8h_source.html">GDNegotiateScheme.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<div class="textblock"><p>This class contains an interface for generating Generic Security Service Application Program Interface (GSS-API) tokens. The tokens are suitable for use in HTTP authentication headers as used in the Simple and Protected GSS-API Negotiation Mechanism (SPNEGO), for example. Use of SPNEGO in BlackBerry Dynamics is dependent on use of Kerberos authentication.</p>
<p>The BlackBerry Dynamics runtime stores, in a secure cache, Kerberos tickets obtained in the course of BlackBerry Dynamics secure communication with application servers. These cached tickets can be used to generate GSS tokens. Kerberos tickets could be cached as a side effect of using the <a class="el" href="interface_g_d_u_r_l_loading_system.html">GDURLLoadingSystem </a>, <a class="el" href="nsurlsession_support.html">NSURLSession</a>, or <a class="el" href="interface_g_d_http_request.html">GDHttpRequest </a> programming interfaces, for example. In addition, there is a programming interface for working with Kerberos tickets directly: <a class="el" href="class_g_d_1_1_k_r_b___a_p_i_1_1_g_d_kerberos_auth_handler.html">GDKerberosAuthHandler</a>.</p>
<p>This class provides a low-level interface for GSS token generation. It can be used in applications that programmatically form their own HTTP headers for authentication, for example, or that handle other protocol elements at a detailed level.</p>
<p>Use of this class is optional. Higher level parts of the BlackBerry Dynamics secure communication stack, for example <code>GDURLLoad</code><code>ingSystem</code> and <code>GDHtt</code><code>pRequest</code>, handle GSS and SPNEGO automatically, without the need for detailed implementation in the application code.</p>
<dl class="section see"><dt>See also</dt><dd><a href="https://tools.ietf.org/html/rfc2743" target="_blank">RFC 2743 - Generic Security Service Application Program Interface</a>. </dd>
<dd>
<a href="https://tools.ietf.org/html/rfc4178" target="_blank">RFC 4178 - The Simple and Protected Generic Security Service Application Program Interface (GSS-API) Negotiation Mechanism</a>. </dd>
<dd>
<a href="https://tools.ietf.org/html/rfc4559" target="_blank">RFC 4559 - SPNEGO-based Kerberos and NTLM HTTP Authentication in Microsoft Windows</a>. </dd>
<dd>
All on the ietf.org website. </dd></dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae6cc2a4d8c51c96ce3712db45def8d27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#ae6cc2a4d8c51c96ce3712db45def8d27">NegotiateScheme</a> ()</td></tr>
<tr class="memdesc:ae6cc2a4d8c51c96ce3712db45def8d27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#ae6cc2a4d8c51c96ce3712db45def8d27">More...</a><br /></td></tr>
<tr class="separator:ae6cc2a4d8c51c96ce3712db45def8d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54ee16b1348b31bfd340500567d6f62b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#a54ee16b1348b31bfd340500567d6f62b">~NegotiateScheme</a> ()</td></tr>
<tr class="separator:a54ee16b1348b31bfd340500567d6f62b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2156fdd10640d89b4a6b4f2723beb43f"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#a2156fdd10640d89b4a6b4f2723beb43f">generateGssApiData</a> (const char *token, const char *hostname, const bool allow_delegation)</td></tr>
<tr class="memdesc:a2156fdd10640d89b4a6b4f2723beb43f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an authentication token for a GSS-API header for SPNEGO.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#a2156fdd10640d89b4a6b4f2723beb43f">More...</a><br /></td></tr>
<tr class="separator:a2156fdd10640d89b4a6b4f2723beb43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf66189765ff2ee3aef19ef2aef0edd5"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#adf66189765ff2ee3aef19ef2aef0edd5">generateGssApiDataWithCB</a> (const char *token, const char *hostname, const bool allow_delegation, int socket)</td></tr>
<tr class="memdesc:adf66189765ff2ee3aef19ef2aef0edd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an authentication token for a GSS-API header for SPNEGO.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#adf66189765ff2ee3aef19ef2aef0edd5">More...</a><br /></td></tr>
<tr class="separator:adf66189765ff2ee3aef19ef2aef0edd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedc59325eddc25aace4ad8c2e48c230c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#aedc59325eddc25aace4ad8c2e48c230c">generateGssApiData</a> (const char *token, <a class="el" href="group__gssstatuscodes.html#gade5be383b6d9266f6f551f6db5be3d37">NegotiateMechanism</a> mechanism, const char *service_principal_name, const bool allow_delegation)</td></tr>
<tr class="memdesc:aedc59325eddc25aace4ad8c2e48c230c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an authentication token for a GSS-API header for a specified negotiation mechanism (deprecated).  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#aedc59325eddc25aace4ad8c2e48c230c">More...</a><br /></td></tr>
<tr class="separator:aedc59325eddc25aace4ad8c2e48c230c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c7486748b67ec55ea3a2ef402d0f06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__gssstatuscodes.html#ga2980ec67af8e232a66a583ac62812ffb">GssStatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#ad9c7486748b67ec55ea3a2ef402d0f06">getGssApiStatus</a> () const</td></tr>
<tr class="memdesc:ad9c7486748b67ec55ea3a2ef402d0f06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the status of the last GSS-API operation.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#ad9c7486748b67ec55ea3a2ef402d0f06">More...</a><br /></td></tr>
<tr class="separator:ad9c7486748b67ec55ea3a2ef402d0f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac1db87da17342c62dcc6fae1f10f03b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#aac1db87da17342c62dcc6fae1f10f03b">gssContextEstablishmentInitiated</a> () const</td></tr>
<tr class="memdesc:aac1db87da17342c62dcc6fae1f10f03b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether GSS security context establishment has been initiated.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#aac1db87da17342c62dcc6fae1f10f03b">More...</a><br /></td></tr>
<tr class="separator:aac1db87da17342c62dcc6fae1f10f03b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a1ea17cb972e25ee364a628c36304268f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#a1ea17cb972e25ee364a628c36304268f">resetKerberosNegotiateTimeout</a> ()</td></tr>
<tr class="memdesc:a1ea17cb972e25ee364a628c36304268f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the timeout to default.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#a1ea17cb972e25ee364a628c36304268f">More...</a><br /></td></tr>
<tr class="separator:a1ea17cb972e25ee364a628c36304268f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98b69395b08b5da9076c5df085bce16b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#a98b69395b08b5da9076c5df085bce16b">setKerberosNegotiateTimeout</a> (unsigned long timeout)</td></tr>
<tr class="memdesc:a98b69395b08b5da9076c5df085bce16b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a custom timeout for Kerberos negotiation in seconds.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#a98b69395b08b5da9076c5df085bce16b">More...</a><br /></td></tr>
<tr class="separator:a98b69395b08b5da9076c5df085bce16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb228eb424e5e131f4c15f1e76032460"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#acb228eb424e5e131f4c15f1e76032460">attemptToCancelKDCNegotiate</a> (const char *host)</td></tr>
<tr class="memdesc:acb228eb424e5e131f4c15f1e76032460"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to cancel an ongoing negotiation.  <a href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#acb228eb424e5e131f4c15f1e76032460">More...</a><br /></td></tr>
<tr class="separator:acb228eb424e5e131f4c15f1e76032460"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae6cc2a4d8c51c96ce3712db45def8d27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6cc2a4d8c51c96ce3712db45def8d27">&#9670;&nbsp;</a></span>NegotiateScheme()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html">NegotiateScheme</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor. </p>

</div>
</div>
<a id="a54ee16b1348b31bfd340500567d6f62b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54ee16b1348b31bfd340500567d6f62b">&#9670;&nbsp;</a></span>~NegotiateScheme()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html">NegotiateScheme</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2156fdd10640d89b4a6b4f2723beb43f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2156fdd10640d89b4a6b4f2723beb43f">&#9670;&nbsp;</a></span>generateGssApiData() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* generateGssApiData </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>allow_delegation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this function to generate a Generic Security Service (GSS) authentication token that is suitable for use in a GSS-API header for SPNEGO. Pass in the token from a server challenge as a parameter.</p>
<p>Token generation depends on there being a suitable Kerberos ticket in the BlackBerry Dynamics secure cache. If there is a suitable cached Kerberos ticket when this function is called, then it is used to generate the token. Otherwise, token generation fails. After failure, the application could take an action that would cause a Kerberos ticket to be cached, for example calling one of the setUpKerberosTicket functions in the <a class="el" href="class_g_d_1_1_k_r_b___a_p_i_1_1_g_d_kerberos_auth_handler.html">GDKerberosAuthHandler</a> class, and then call this function again.</p>
<p>This function doesn't return a success or failure code. To discover whether token generation succeeded or failed, call the <a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#ad9c7486748b67ec55ea3a2ef402d0f06" title="Get the status of the last GSS-API operation.">getGssApiStatus()</a> function every time.</p>
<p>It might be necessary to call this function more than once, and to pass different server challenge token values. This could happen if the server requires more than one challenge-response exchange, for example. When <code>getGssApiStatus</code> returns <code>STATUS_GSS_S_COMPLETE</code> then negotiation is complete.</p>
<p>Pass as a parameter a specifier for the authentication host to be used for the negotiation. Format the value as follows:<br  />
<em><code>server.address.com</code></em>:<em><code>portNumber</code></em><br  />
Where:</p><ul>
<li><em><code>server.address.com</code></em> is a fully qualified domain name (FQDN).</li>
<li><em><code>portNumber</code></em> can be omitted if it is 80. If the port number is omitted, also omit the colon (:) separator.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td><code>char*</code> pointer to memory containing the Base64-encoded initial token from the server challenge, and a null terminator.</td></tr>
    <tr><td class="paramname">hostname</td><td><code>char*</code> pointer to memory containing the authentication host specifier, and a null terminator.</td></tr>
    <tr><td class="paramname">allow_delegation</td><td><code>bool</code> flag for whether to allow Kerberos delegation to be used to obtain the token. Note that delegation might not be allowed by the authentication service, which would take precedence over this parameter value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>char*</code> pointer to memory containing a Base64-encoded token for a GSS token, and a null terminator.<br  />
 The returned value, if non-null, will be a pointer to memory that has been allocated from the heap. The caller of this function must release the memory. </dd></dl>

</div>
</div>
<a id="adf66189765ff2ee3aef19ef2aef0edd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf66189765ff2ee3aef19ef2aef0edd5">&#9670;&nbsp;</a></span>generateGssApiDataWithCB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* generateGssApiDataWithCB </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>allow_delegation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>socket</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use this call to enable Channel Binding and supply socket FD</p>
<p>Call this function to generate a Generic Security Service (GSS) authentication token that is suitable for use in a GSS-API header for SPNEGO. Pass in the token from a server challenge as a parameter.</p>
<p>Token generation depends on there being a suitable Kerberos ticket in the BlackBerry Dynamics secure cache. If there is a suitable cached Kerberos ticket when this function is called, then it is used to generate the token. Otherwise, token generation fails. After failure, the application could take an action that would cause a Kerberos ticket to be cached, for example calling one of the setUpKerberosTicket functions in the <a class="el" href="class_g_d_1_1_k_r_b___a_p_i_1_1_g_d_kerberos_auth_handler.html">GDKerberosAuthHandler</a> class, and then call this function again.</p>
<p>This function doesn't return a success or failure code. To discover whether token generation succeeded or failed, call the <a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#ad9c7486748b67ec55ea3a2ef402d0f06" title="Get the status of the last GSS-API operation.">getGssApiStatus()</a> function every time.</p>
<p>It might be necessary to call this function more than once, and to pass different server challenge token values. This could happen if the server requires more than one challenge-response exchange, for example. When <code>getGssApiStatus</code> returns <code>STATUS_GSS_S_COMPLETE</code> then negotiation is complete.</p>
<p>Pass as a parameter a specifier for the authentication host to be used for the negotiation. Format the value as follows:<br  />
<em><code>server.address.com</code></em>:<em><code>portNumber</code></em><br  />
Where:</p><ul>
<li><em><code>server.address.com</code></em> is a fully qualified domain name (FQDN).</li>
<li><em><code>portNumber</code></em> can be omitted if it is 80. If the port number is omitted, also omit the colon (:) separator.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td><code>char*</code> pointer to memory containing the Base64-encoded initial token from the server challenge, and a null terminator.</td></tr>
    <tr><td class="paramname">hostname</td><td><code>char*</code> pointer to memory containing the authentication host specifier, and a null terminator.</td></tr>
    <tr><td class="paramname">allow_delegation</td><td><code>bool</code> flag for whether to allow Kerberos delegation to be used to obtain the token. Note that delegation might not be allowed by the authentication service, which would take precedence over this parameter value.</td></tr>
    <tr><td class="paramname">socket</td><td><code>int</code> the socket FD</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>char*</code> pointer to memory containing a Base64-encoded token for a GSS token, and a null terminator.<br  />
 The returned value, if non-null, will be a pointer to memory that has been allocated from the heap. The caller of this function must release the memory. </dd></dl>

</div>
</div>
<a id="aedc59325eddc25aace4ad8c2e48c230c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedc59325eddc25aace4ad8c2e48c230c">&#9670;&nbsp;</a></span>generateGssApiData() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* generateGssApiData </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__gssstatuscodes.html#gade5be383b6d9266f6f551f6db5be3d37">NegotiateMechanism</a>&#160;</td>
          <td class="paramname"><em>mechanism</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service_principal_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>allow_delegation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000036">Deprecated:</a></b></dt><dd>This function is deprecated and will be removed in a future release. It is no longer required.</dd></dl>
<p>Call this function to generate a Generic Security Service (GSS) authentication token that is suitable for use in a GSS-API header for a specified negotiation mechanism. Pass in the token from a server challenge as a parameter.</p>
<p>Token generation depends on there being a suitable Kerberos ticket in the BlackBerry Dynamics secure cache. If there is a suitable cached Kerberos ticket when this function is called, then it is used to generate the token. Otherwise, token generation fails. After failure, the application could take an action that would cause a Kerberos ticket to be cached, for example calling one of the setUpKerberosTicket functions in the <a class="el" href="class_g_d_1_1_k_r_b___a_p_i_1_1_g_d_kerberos_auth_handler.html">GDKerberosAuthHandler</a> class, and then call this function again.</p>
<p>This function doesn't return a success or failure code. To discover whether token generation succeeded or failed, call the <a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html#ad9c7486748b67ec55ea3a2ef402d0f06" title="Get the status of the last GSS-API operation.">getGssApiStatus()</a> function every time.</p>
<p>It might be necessary to call this function more than once, and to pass different server challenge token values. This could happen if the server requires more than one challenge-response exchange, for example. When <code>getGssApiStatus</code> returns <code>STATUS_GSS_S_COMPLETE</code> then negotiation is complete.</p>
<p>Pass as a parameter the service principal name for the negotiation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token</td><td><code>char*</code> pointer to memory containing the Base64-encoded initial token from the server challenge, and a null terminator.</td></tr>
    <tr><td class="paramname">mechanism</td><td><code>NegotiateMechanism</code> value for the negotiation mechanism.</td></tr>
    <tr><td class="paramname">service_principal_name</td><td><code>char*</code> pointer to memory containing the service principal name, and a null terminator.</td></tr>
    <tr><td class="paramname">allow_delegation</td><td><code>bool</code> flag for whether to allow Kerberos delegation to be used to obtain the token. Note that delegation might not be allowed by the authentication service, which would take precedence over this parameter value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>char*</code> pointer to memory containing a Base64-encoded GSS token for the specified negotiation scheme and mechanism, and a null terminator.<br  />
 The returned value, if non-null, will be a pointer to memory that has been allocated from the heap. The caller of this function must release the memory. </dd></dl>

</div>
</div>
<a id="ad9c7486748b67ec55ea3a2ef402d0f06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c7486748b67ec55ea3a2ef402d0f06">&#9670;&nbsp;</a></span>getGssApiStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__gssstatuscodes.html#ga2980ec67af8e232a66a583ac62812ffb">GssStatusCode</a> getGssApiStatus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this function to get the status of the last GSS-API operation, specifically to determine the success or failure of the last call to a <code>generateGssApiData</code> function.</p>
<p>The <code>STATUS_UNKNOWN</code> value is returned if there is no current context, for example if token generation hasn't been attempted yet.</p>
<dl class="section return"><dt>Returns</dt><dd><code>GssStatusCode</code> value representing the status. </dd></dl>

</div>
</div>
<a id="aac1db87da17342c62dcc6fae1f10f03b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac1db87da17342c62dcc6fae1f10f03b">&#9670;&nbsp;</a></span>gssContextEstablishmentInitiated()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gssContextEstablishmentInitiated </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call this function to check whether establishment of a GSS security context has been initiated.</p>
<p>This function doesn't necessarily return <code>false</code> if security context establishment has completed.</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if GSS context establishment has been initiated. </dd>
<dd>
<code>false</code> otherwise. </dd></dl>

</div>
</div>
<a id="a1ea17cb972e25ee364a628c36304268f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ea17cb972e25ee364a628c36304268f">&#9670;&nbsp;</a></span>resetKerberosNegotiateTimeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void resetKerberosNegotiateTimeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reset the timeout to 120 seconds for KCD requests and 30 seconds for non-KCD requests. </p>

</div>
</div>
<a id="a98b69395b08b5da9076c5df085bce16b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98b69395b08b5da9076c5df085bce16b">&#9670;&nbsp;</a></span>setKerberosNegotiateTimeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void setKerberosNegotiateTimeout </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>timeout</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set a custom timeout for Kerberos negotiation requests in seconds</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout</td><td>The timeout in seconds, must be greater than 0, affects both KDC and KCD requests. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acb228eb424e5e131f4c15f1e76032460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb228eb424e5e131f4c15f1e76032460">&#9670;&nbsp;</a></span>attemptToCancelKDCNegotiate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool attemptToCancelKDCNegotiate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempt to cancel an ongoing negotiation. This is not guaranteed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">host</td><td>A string pointer to the target host </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_g_d_negotiate_scheme_8h_source.html">GDNegotiateScheme.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_g_d.html">GD</a></li><li class="navelem"><a class="el" href="namespace_g_d_1_1_g_s_s___a_p_i.html">GSS_API</a></li><li class="navelem"><a class="el" href="class_g_d_1_1_g_s_s___a_p_i_1_1_negotiate_scheme.html">NegotiateScheme</a></li>
    <li class="footer">
Generated Wed Mar 12 2025 12:06:26
with v1.8.17 <a href="http://www.doxygen.org/index.html" target="_blank">doxygen</a >.
Version 13.1.0.48.
© 2025 BlackBerry Limited. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
